{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\orime\\\\IdeaProjects\\\\Project_Ori_Meir\\\\Front\\\\src\\\\Components\\\\Pages\\\\CompanyPages\\\\CompanyCoupons\\\\CompanyCoupons.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport \"./CompanyCoupons.css\";\nimport { Coupon } from \"../../../Models/Coupon\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { checkData } from \"../../../../util/chekData\";\nimport { myStore } from \"../../../../redux/Store\";\nimport axiosJWT from \"../../../../util/axiosJWT\";\nimport { getCompanyCouponsAction } from \"../../../../redux/CompanyReducer\";\nimport { Typography } from \"@mui/material\";\nimport { SingleCoupon } from \"../../GuestPages/SingleCoupon/SingleCoupon\";\nimport notify from \"../../../../util/notify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CompanyCoupons() {\n  _s();\n  const [coupons, setCoupons] = useState([]);\n  const navigate = useNavigate();\n  const params = useParams();\n  useEffect(() => {\n    if (myStore.getState().auth.userType !== \"COMPANY\") {\n      navigate(\"/Page404\");\n      notify.error(\"No Acess!!!!!\");\n    }\n    let returnCoupons = [];\n    checkData();\n    console.log(\"getting all coupons.....\", myStore.getState().auth);\n    if (myStore.getState().company.allCoupons.length <= 1) {\n      const token = myStore.getState().auth.token;\n      axiosJWT.get(`http://localhost:8080/allCompanyCoupons/${myStore.getState().auth.id}`).then(res => {\n        for (let index = 0; index < res.data.length; index++) {\n          returnCoupons.push(new Coupon(res.data[index].id, res.data[index].companyId, res.data[index].category, res.data[index].title, res.data[index].decription, res.data[index].startDate, res.data[index].endDate, res.data[index].amount, res.data[index].price, res.data[index].image));\n        }\n        console.log(\"we got coupons\", returnCoupons);\n        myStore.dispatch(getCompanyCouponsAction(returnCoupons));\n        setCoupons(returnCoupons);\n      }).catch(err => {\n        console.error(\"Failed to fetch company coupons:\", err.message);\n        navigate(\"/Login\");\n      });\n    } else {\n      console.log(\"from store:\", myStore.getState().company.allCoupons);\n      setCoupons(myStore.getState().company.allCoupons);\n    }\n  }, [params.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"CompanyCoupons\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      children: \"All Company Coupons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 13\n    }, this), coupons.map(item => /*#__PURE__*/_jsxDEV(SingleCoupon, {\n      coupon: item\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 34\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(CompanyCoupons, \"/yYaIsNTowPJSUklGh/aepzzoJc=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = CompanyCoupons;\nvar _c;\n$RefreshReg$(_c, \"CompanyCoupons\");","map":{"version":3,"names":["useEffect","useState","Coupon","useNavigate","useParams","checkData","myStore","axiosJWT","getCompanyCouponsAction","Typography","SingleCoupon","notify","jsxDEV","_jsxDEV","CompanyCoupons","_s","coupons","setCoupons","navigate","params","getState","auth","userType","error","returnCoupons","console","log","company","allCoupons","length","token","get","id","then","res","index","data","push","companyId","category","title","decription","startDate","endDate","amount","price","image","dispatch","catch","err","message","className","children","variant","fileName","_jsxFileName","lineNumber","columnNumber","map","item","coupon","_c","$RefreshReg$"],"sources":["C:/Users/orime/IdeaProjects/Project_Ori_Meir/Front/src/Components/Pages/CompanyPages/CompanyCoupons/CompanyCoupons.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./CompanyCoupons.css\";\nimport { Coupon } from \"../../../Models/Coupon\";\nimport axios, { AxiosError } from \"axios\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { checkData } from \"../../../../util/chekData\";\nimport { myStore } from \"../../../../redux/Store\";\nimport axiosJWT from \"../../../../util/axiosJWT\";\nimport { getAllCouponsAction } from \"../../../../redux/CouponReducer\";\nimport { getCompanyCouponsAction } from \"../../../../redux/CompanyReducer\";\nimport { Typography } from \"@mui/material\";\nimport { SingleCoupon } from \"../../GuestPages/SingleCoupon/SingleCoupon\";\nimport notify from \"../../../../util/notify\";\n\nexport function CompanyCoupons(): JSX.Element {\n    const [coupons, setCoupons] = useState<Coupon[]>([]);\n    const navigate = useNavigate();\n    const params = useParams();\n\n    useEffect(() => {\n        if(myStore.getState().auth.userType !== \"COMPANY\"){\n            navigate(\"/Page404\");\n            notify.error(\"No Acess!!!!!\");\n\n        }\n        let returnCoupons: Coupon[] = [];\n\n        checkData();\n        console.log(\"getting all coupons.....\",myStore.getState().auth);\n        if (myStore.getState().company.allCoupons.length <= 1) {\n            const token = myStore.getState().auth.token;\n            axiosJWT.get(`http://localhost:8080/allCompanyCoupons/${myStore.getState().auth.id}`)\n            .then(res => {\n                for (let index = 0; index < res.data.length; index++) {\n                    returnCoupons.push(new Coupon(\n                        res.data[index].id, \n                        res.data[index].companyId,\n                        res.data[index].category,\n                        res.data[index].title,\n                        res.data[index].decription,\n                        res.data[index].startDate,\n                        res.data[index].endDate,\n                        res.data[index].amount,\n                        res.data[index].price,\n                        res.data[index].image\n                    ));\n                }\n                console.log(\"we got coupons\", returnCoupons);\n                myStore.dispatch(getCompanyCouponsAction(returnCoupons));\n                setCoupons(returnCoupons);\n            })\n            .catch((err:AxiosError) => {\n                console.error(\"Failed to fetch company coupons:\", err.message);\n                navigate(\"/Login\");\n            });\n        } else {\n            console.log(\"from store:\", myStore.getState().company.allCoupons);\n            setCoupons(myStore.getState().company.allCoupons);\n        }\n    }, [params.id]);\n\n    return (\n        <div className=\"CompanyCoupons\" >\n            <Typography variant=\"h5\">All Company Coupons</Typography>\n            {coupons.map(item => <SingleCoupon key={item.id} coupon={item}/>)}\n        </div>\n    );\n}\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,OAAO,sBAAsB;AAC7B,SAASC,MAAM,QAAQ,wBAAwB;AAE/C,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,SAASC,SAAS,QAAQ,2BAA2B;AACrD,SAASC,OAAO,QAAQ,yBAAyB;AACjD,OAAOC,QAAQ,MAAM,2BAA2B;AAEhD,SAASC,uBAAuB,QAAQ,kCAAkC;AAC1E,SAASC,UAAU,QAAQ,eAAe;AAC1C,SAASC,YAAY,QAAQ,4CAA4C;AACzE,OAAOC,MAAM,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7C,OAAO,SAASC,cAAcA,CAAA,EAAgB;EAAAC,EAAA;EAC1C,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAW,EAAE,CAAC;EACpD,MAAMiB,QAAQ,GAAGf,WAAW,CAAC,CAAC;EAC9B,MAAMgB,MAAM,GAAGf,SAAS,CAAC,CAAC;EAE1BJ,SAAS,CAAC,MAAM;IACZ,IAAGM,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,KAAK,SAAS,EAAC;MAC9CJ,QAAQ,CAAC,UAAU,CAAC;MACpBP,MAAM,CAACY,KAAK,CAAC,eAAe,CAAC;IAEjC;IACA,IAAIC,aAAuB,GAAG,EAAE;IAEhCnB,SAAS,CAAC,CAAC;IACXoB,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAACpB,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACC,IAAI,CAAC;IAC/D,IAAIf,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACO,OAAO,CAACC,UAAU,CAACC,MAAM,IAAI,CAAC,EAAE;MACnD,MAAMC,KAAK,GAAGxB,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACC,IAAI,CAACS,KAAK;MAC3CvB,QAAQ,CAACwB,GAAG,CAAC,2CAA2CzB,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACC,IAAI,CAACW,EAAE,EAAE,CAAC,CACpFC,IAAI,CAACC,GAAG,IAAI;QACT,KAAK,IAAIC,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGD,GAAG,CAACE,IAAI,CAACP,MAAM,EAAEM,KAAK,EAAE,EAAE;UAClDX,aAAa,CAACa,IAAI,CAAC,IAAInC,MAAM,CACzBgC,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACH,EAAE,EAClBE,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACG,SAAS,EACzBJ,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACI,QAAQ,EACxBL,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACK,KAAK,EACrBN,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACM,UAAU,EAC1BP,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACO,SAAS,EACzBR,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACQ,OAAO,EACvBT,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACS,MAAM,EACtBV,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACU,KAAK,EACrBX,GAAG,CAACE,IAAI,CAACD,KAAK,CAAC,CAACW,KACpB,CAAC,CAAC;QACN;QACArB,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,aAAa,CAAC;QAC5ClB,OAAO,CAACyC,QAAQ,CAACvC,uBAAuB,CAACgB,aAAa,CAAC,CAAC;QACxDP,UAAU,CAACO,aAAa,CAAC;MAC7B,CAAC,CAAC,CACDwB,KAAK,CAAEC,GAAc,IAAK;QACvBxB,OAAO,CAACF,KAAK,CAAC,kCAAkC,EAAE0B,GAAG,CAACC,OAAO,CAAC;QAC9DhC,QAAQ,CAAC,QAAQ,CAAC;MACtB,CAAC,CAAC;IACN,CAAC,MAAM;MACHO,OAAO,CAACC,GAAG,CAAC,aAAa,EAAEpB,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACO,OAAO,CAACC,UAAU,CAAC;MACjEX,UAAU,CAACX,OAAO,CAACc,QAAQ,CAAC,CAAC,CAACO,OAAO,CAACC,UAAU,CAAC;IACrD;EACJ,CAAC,EAAE,CAACT,MAAM,CAACa,EAAE,CAAC,CAAC;EAEf,oBACInB,OAAA;IAAKsC,SAAS,EAAC,gBAAgB;IAAAC,QAAA,gBAC3BvC,OAAA,CAACJ,UAAU;MAAC4C,OAAO,EAAC,IAAI;MAAAD,QAAA,EAAC;IAAmB;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAY,CAAC,EACxDzC,OAAO,CAAC0C,GAAG,CAACC,IAAI,iBAAI9C,OAAA,CAACH,YAAY;MAAekD,MAAM,EAAED;IAAK,GAAtBA,IAAI,CAAC3B,EAAE;MAAAsB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAgB,CAAC,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAChE,CAAC;AAEd;AAAC1C,EAAA,CArDeD,cAAc;EAAA,QAETX,WAAW,EACbC,SAAS;AAAA;AAAAyD,EAAA,GAHZ/C,cAAc;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
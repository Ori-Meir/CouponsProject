{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\orime\\\\IdeaProjects\\\\Project_Ori_Meir\\\\Front\\\\src\\\\Components\\\\Pages\\\\CustomerPages\\\\CustomersCoupons\\\\CustomersCoupons.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport \"./CustomersCoupons.css\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Coupon } from \"../../../Models/Coupon\";\nimport { checkData } from \"../../../../util/chekData\";\nimport { myStore } from \"../../../../redux/Store\";\nimport axiosJWT from \"../../../../util/axiosJWT\";\nimport { getCustomerCouponsAction } from \"../../../../redux/CustomerReducer\";\nimport { Typography } from \"@mui/material\";\nimport { SingleCoupon } from \"../../GuestPages/SingleCoupon/SingleCoupon\";\nimport notify from \"../../../../util/notify\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CustomersCoupons() {\n  _s();\n  const [coupons, setCoupons] = useState([]);\n  const navigate = useNavigate();\n  const params = useParams();\n  useEffect(() => {\n    if (myStore.getState().auth.userType !== \"CUSTOMER\") {\n      navigate(\"/Page404\");\n      notify.error(\"No Acess!!!!!\");\n    }\n    let returnCoupons = [];\n    checkData();\n    console.log(\"getting all coupons.....\", myStore.getState().auth);\n    if (myStore.getState().customer.customerCoupons.length <= 1) {\n      const token = myStore.getState().auth.token;\n      axiosJWT.get(`http://localhost:8080/allCustomerCoupons/${myStore.getState().auth.id}`).then(res => {\n        for (let index = 0; index < res.data.length; index++) {\n          returnCoupons.push(new Coupon(res.data[index].id, res.data[index].companyId, res.data[index].category, res.data[index].title, res.data[index].decription, res.data[index].startDate, res.data[index].endDate, res.data[index].amount, res.data[index].price, res.data[index].image));\n        }\n        console.log(\"we got coupons\", returnCoupons);\n        myStore.dispatch(getCustomerCouponsAction(returnCoupons));\n        setCoupons(returnCoupons);\n      }).catch(err => {\n        console.error(\"Failed to fetch company coupons:\", err.message);\n        navigate(\"/Login\");\n      });\n    } else {\n      console.log(\"from store:\", myStore.getState().customer.customerCoupons);\n      setCoupons(myStore.getState().customer.customerCoupons);\n    }\n  }, [params.id]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"CustomersCoupons\",\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      children: \"All Customer Coupons\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 4\n    }, this), coupons.map(item => /*#__PURE__*/_jsxDEV(SingleCoupon, {\n      coupon: item\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 34\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(CustomersCoupons, \"/yYaIsNTowPJSUklGh/aepzzoJc=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c = CustomersCoupons;\nvar _c;\n$RefreshReg$(_c, \"CustomersCoupons\");","map":{"version":3,"names":["useEffect","useState","useNavigate","useParams","Coupon","checkData","myStore","axiosJWT","getCustomerCouponsAction","Typography","SingleCoupon","notify","jsxDEV","_jsxDEV","CustomersCoupons","_s","coupons","setCoupons","navigate","params","getState","auth","userType","error","returnCoupons","console","log","customer","customerCoupons","length","token","get","id","then","res","index","data","push","companyId","category","title","decription","startDate","endDate","amount","price","image","dispatch","catch","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","item","coupon","_c","$RefreshReg$"],"sources":["C:/Users/orime/IdeaProjects/Project_Ori_Meir/Front/src/Components/Pages/CustomerPages/CustomersCoupons/CustomersCoupons.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport \"./CustomersCoupons.css\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { Coupon } from \"../../../Models/Coupon\";\nimport { checkData } from \"../../../../util/chekData\";\nimport { myStore } from \"../../../../redux/Store\";\nimport axiosJWT from \"../../../../util/axiosJWT\";\nimport { getCustomerCouponsAction } from \"../../../../redux/CustomerReducer\";\nimport { AxiosError } from \"axios\";\nimport { Typography } from \"@mui/material\";\nimport { SingleCoupon } from \"../../GuestPages/SingleCoupon/SingleCoupon\";\nimport notify from \"../../../../util/notify\";\n\nexport function CustomersCoupons(): JSX.Element {\n    const [coupons, setCoupons] = useState<Coupon[]>([]);\n    const navigate = useNavigate();\n    const params = useParams();\n\n    useEffect(() => {\n        if(myStore.getState().auth.userType !== \"CUSTOMER\"){\n            navigate(\"/Page404\");\n            notify.error(\"No Acess!!!!!\");\n\n        }\n        let returnCoupons: Coupon[] = [];\n\n        checkData();\n        console.log(\"getting all coupons.....\",myStore.getState().auth);\n        if (myStore.getState().customer.customerCoupons.length <=1) {\n            const token = myStore.getState().auth.token;\n            axiosJWT.get(`http://localhost:8080/allCustomerCoupons/${myStore.getState().auth.id}`)\n            .then(res => {\n                for (let index = 0; index < res.data.length; index++) {\n                    returnCoupons.push(new Coupon(\n                        res.data[index].id, \n                        res.data[index].companyId,\n                        res.data[index].category,\n                        res.data[index].title,\n                        res.data[index].decription,\n                        res.data[index].startDate,\n                        res.data[index].endDate,\n                        res.data[index].amount,\n                        res.data[index].price,\n                        res.data[index].image\n                    ));\n                }\n                console.log(\"we got coupons\", returnCoupons);\n                myStore.dispatch(getCustomerCouponsAction(returnCoupons));\n                setCoupons(returnCoupons);\n            })\n            .catch((err:AxiosError) => {\n                console.error(\"Failed to fetch company coupons:\", err.message);\n                navigate(\"/Login\");\n            });\n        } else {\n            console.log(\"from store:\", myStore.getState().customer.customerCoupons);\n            setCoupons(myStore.getState().customer.customerCoupons);\n        }\n    }, [params.id]);\n\n    return (\n        <div className=\"CustomersCoupons\">\n\t\t\t<Typography>All Customer Coupons</Typography>\n            {coupons.map(item => <SingleCoupon key={item.id} coupon={item}/>)}\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}